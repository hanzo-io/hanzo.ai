{"version":3,"file":"akasha.js","sources":["../src/cookie-storage.coffee","../src/storage.coffee","../src/local-storage.coffee","../src/index.coffee"],"sourcesContent":["import cookies from 'es-cookies'\nimport md5     from 'es-md5'\n\nexport default do ->\n  postFix = md5 window.location.host\n  key = (k) -> \"#{k}_#{postFix}\"\n\n  get: (k) ->\n    cookies.getJSON key k\n\n  set: (k, v) ->\n    ks = (cookies.getJSON key '_keys') ? []\n    ks.push k\n    cookies.set (key '_keys'), ks\n    cookies.set (key k), v\n\n  remove: (k) ->\n    cookies.remove key k\n\n  clear: ->\n    ks = (cookies.getJSON key '_keys') ? []\n    for k in ks\n      cookies.remove k\n    cookies.remove key '_keys'\n","export default (backend) ->\n  root  = if typeof window == 'undefined' then global else window\n  store = root[backend+'Storage']\n\n  get: (k) ->\n    try\n      JSON.parse store.getItem k\n    catch err\n      console.error 'Unable to parse', k\n      undefined\n\n  set: (k, v) ->\n    store.setItem k, JSON.stringify v\n\n  remove: (k) ->\n    store.removeItem k\n\n  clear: ->\n    store.clear()\n","import storage from './storage'\nexport default storage 'local'\n","import cookieStorage  from './cookie-storage'\nimport localStorage   from './local-storage'\n\nsupported = (storage) ->\n  try\n    testStr = '__akasha__test__'\n    storage.set testStr, testStr\n    ok = (storage.get testStr) == testStr\n    storage.remove testStr\n    ok\n  catch err\n    false\n\nexport default do ->\n  if supported localStorage\n    localStorage\n  else\n    cookieStorage\n"],"names":[],"mappings":";;;;;;;;AAAA,AACA,AAEA,oBAAkB,CAAA;MAChB;EAAA,OAAA,GAAU,GAAA,CAAI,MAAM,CAAC,QAAQ,CAAC,IAApB;EACV,GAAA,GAAM,SAAC,CAAD;WAAU,CAAD,GAAG,GAAH,GAAM;;SAErB;IAAA,GAAA,EAAK,SAAC,CAAD;aACH,OAAO,CAAC,OAAR,CAAgB,GAAA,CAAI,CAAJ,CAAhB;KADF;IAGA,GAAA,EAAK,SAAC,CAAD,EAAI,CAAJ;UACH;MAAA,EAAA,yDAAqC;MACrC,EAAE,CAAC,IAAH,CAAQ,CAAR;MACA,OAAO,CAAC,GAAR,CAAa,GAAA,CAAI,OAAJ,CAAb,EAA2B,EAA3B;aACA,OAAO,CAAC,GAAR,CAAa,GAAA,CAAI,CAAJ,CAAb,EAAqB,CAArB;KAPF;IASA,MAAA,EAAQ,SAAC,CAAD;aACN,OAAO,CAAC,MAAR,CAAe,GAAA,CAAI,CAAJ,CAAf;KAVF;IAYA,KAAA,EAAO;UACL;MAAA,EAAA,yDAAqC;WACrC,oCAAA;;QACE,OAAO,CAAC,MAAR,CAAe,CAAf;;aACF,OAAO,CAAC,MAAR,CAAe,GAAA,CAAI,OAAJ,CAAf;KAhBF;;CAJgB;;;ACHlB,cAAe,SAAC,OAAD;MACb;EAAA,IAAA,GAAW,OAAO,MAAP,KAAiB,WAApB,GAAqC,MAArC,GAAiD;EACzD,KAAA,GAAQ,IAAK,CAAA,OAAA,GAAQ,SAAR;SAEb;IAAA,GAAA,EAAK,SAAC,CAAD;UACH;;eACE,IAAI,CAAC,KAAL,CAAW,KAAK,CAAC,OAAN,CAAc,CAAd,CAAX,EADF;OAAA,aAAA;QAEM;QACJ,OAAO,CAAC,KAAR,CAAc,iBAAd,EAAiC,CAAjC;eACA,OAJF;;KADF;IAOA,GAAA,EAAK,SAAC,CAAD,EAAI,CAAJ;aACH,KAAK,CAAC,OAAN,CAAc,CAAd,EAAiB,IAAI,CAAC,SAAL,CAAe,CAAf,CAAjB;KARF;IAUA,MAAA,EAAQ,SAAC,CAAD;aACN,KAAK,CAAC,UAAN,CAAiB,CAAjB;KAXF;IAaA,KAAA,EAAO;aACL,KAAK,CAAC,KAAN;KAdF;;;;;ACJF,AACA,mBAAe,OAAA,CAAQ,OAAR;;;ACDf,IAAA;;AAAA,AACA,AAEA,SAAA,GAAY,SAAC,OAAD;MACV;;IACE,OAAA,GAAU;IACV,OAAO,CAAC,GAAR,CAAY,OAAZ,EAAqB,OAArB;IACA,EAAA,GAAK,CAAC,OAAO,CAAC,GAAR,CAAY,OAAZ,CAAD,MAAyB;IAC9B,OAAO,CAAC,MAAR,CAAe,OAAf;WACA,GALF;GAAA,aAAA;IAMM;WACJ,MAPF;;;;AASF,YAAkB,CAAA;EAChB,IAAG,SAAA,CAAU,YAAV,CAAH;WACE,aADF;GAAA,MAAA;WAGE,cAHF;;CADgB;;"}