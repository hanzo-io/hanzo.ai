{"version":3,"file":"cake-publish.mjs","sources":["../src/index.coffee"],"sourcesContent":["import exec from 'executive'\n\n\nexport default (opts = {}) ->\n  opts.git ?= true\n  opts.npm ?= true\n\n  task 'publish', 'publish project', ->\n    cmds = []\n\n    if opts.npm\n      cmds.push 'npm publish'\n\n    if opts.git? and opts.git != false\n      unless opts.git.tags == false\n        cmds.push 'git push --tags'\n\n      if opts.git == true\n        cmds.push 'git push'\n      else\n        {force, remote, refspec} = opts.git\n        if remote?\n          respec  = if refspec?      then refspec else ''\n          force   = if force == true then '-f'    else ''\n          cmds.push \"git push #{force} #{remote} #{refspec}\"\n\n    exec.parallel cmds\n"],"names":[],"mappings":";;;AAAA,AAGA,YAAe,SAAC,OAAO,EAAR;;IACb,IAAI,CAAC,MAAO;;;IACZ,IAAI,CAAC,MAAO;;SAEZ,IAAA,CAAK,SAAL,EAAgB,iBAAhB,EAAmC;QACjC;IAAA,IAAA,GAAO;IAEP,IAAG,IAAI,CAAC,GAAR;MACE,IAAI,CAAC,IAAL,CAAU,aAAV,EADF;;IAGA,IAAG,sBAAc,IAAI,CAAC,GAAL,KAAY,KAA7B;MACE,IAAO,IAAI,CAAC,GAAG,CAAC,IAAT,KAAiB,KAAxB;QACE,IAAI,CAAC,IAAL,CAAU,iBAAV,EADF;;MAGA,IAAG,IAAI,CAAC,GAAL,KAAY,IAAf;QACE,IAAI,CAAC,IAAL,CAAU,UAAV,EADF;OAAA,MAAA;QAGE,MAA2B,IAAI,CAAC,GAAhC,EAAC,iBAAD,EAAQ,mBAAR,EAAgB;QAChB,IAAG,cAAH;UACE,MAAA,GAAa,eAAH,GAAsB,OAAtB,GAAmC;UAC7C,KAAA,GAAa,KAAA,KAAS,IAAZ,GAAsB,IAAtB,GAAmC;UAC7C,IAAI,CAAC,IAAL,CAAU,CAAA,SAAA,EAAY,KAAZ,EAAA,EAAqB,MAArB,EAAA,EAA+B,OAA/B,CAAA,CAAV,EAHF;SAJF;OAJF;;WAaA,IAAI,CAAC,QAAL,CAAc,IAAd;GAnBF;;;"}